<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>تست مینی‌اپ</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
body { font-family: sans-serif; direction: rtl; padding: 20px; background: #f5f7fa; }
input { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ccc; margin-bottom: 10px; }
button { padding: 10px 20px; border: none; border-radius: 8px; background: #0088cc; color: white; cursor: pointer; }
button:hover { background: #0077b3; }
#completion { display: none; margin-top: 20px; color: green; font-weight: bold; }
</style>
</head>
<body>

<h2>مینی‌اپ تستی</h2>
<input type="text" id="userInput" placeholder="یک متن وارد کنید">
<button onclick="submitData()">ارسال</button>

<div id="completion">✅ داده ارسال شد و فرم تکمیل شد!</div>

<script>
Telegram.WebApp.ready();

function submitData() {
    const value = document.getElementById("userInput").value.trim();
    if (!value) { alert("⚠️ فیلد خالی است!"); return; }

    // ارسال داده به ربات
    Telegram.WebApp.sendData(JSON.stringify({text: value}));

    // نمایش پیام تکمیل
    document.getElementById("completion").style.display = "block";

    // بعد از 1 ثانیه Web App را ببند
    setTimeout(() => {
        Telegram.WebApp.close();
    }, 1000);
}
</script>

</body>
</html>
