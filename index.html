<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>ÙØ±Ù… Ú†Ù†Ø¯Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      font-family: sans-serif;
      direction: rtl;
      padding: 20px;
      background: #f5f7fa;
      color: #333;
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    .step { display: none; }
    .step.active { display: block; }
    .input-box { margin-bottom: 15px; }
    input, textarea {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
    }
    .options label { display: block; margin: 5px 0; }
    button {
      width: 48%;
      padding: 12px;
      border: none;
      border-radius: 10px;
      background: #0088cc;
      color: white;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover { background: #0077b3; }
    .nav { display: flex; justify-content: space-between; margin-top: 20px; }
  </style>
</head>
<body>
  <h2>ğŸ“‹ ÙØ±Ù… Ú†Ù†Ø¯Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ</h2>

  <!-- Ù…Ø±Ø­Ù„Ù‡ Û± -->
  <div class="step active" id="step1">
    <div class="input-box">
      <label>ğŸ‘¤ Ù†Ø§Ù… Ú©Ø§Ù…Ù„:</label>
      <input type="text" id="name" placeholder="Ù†Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
    </div>
  </div>

  <!-- Ù…Ø±Ø­Ù„Ù‡ Û² -->
  <div class="step" id="step2">
    <div class="input-box">
      <label>ğŸ“ Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³:</label>
      <input type="tel" id="phone" placeholder="09123456789">
    </div>
  </div>

  <!-- Ù…Ø±Ø­Ù„Ù‡ Û³ -->
  <div class="step" id="step3">
    <div class="input-box">
      <label>â“ Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ (Ú†Ù†Ø¯ Ù…ÙˆØ±Ø¯ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†):</label>
      <div class="options">
        <label><input type="checkbox" value="Ú©ØªØ§Ø¨"> ğŸ“š Ú©ØªØ§Ø¨</label>
        <label><input type="checkbox" value="ÙˆØ±Ø²Ø´"> ğŸƒ ÙˆØ±Ø²Ø´</label>
        <label><input type="checkbox" value="Ù…ÙˆØ³ÛŒÙ‚ÛŒ"> ğŸµ Ù…ÙˆØ³ÛŒÙ‚ÛŒ</label>
        <label><input type="checkbox" value="Ø³ÙØ±"> âœˆï¸ Ø³ÙØ±</label>
      </div>
    </div>
  </div>

  <!-- Ù…Ø±Ø­Ù„Ù‡ Û´ -->
  <div class="step" id="step4">
    <div class="input-box">
      <label>ğŸ“ ØªÙˆØ¶ÛŒØ­Ø§Øª ÛŒØ§ Ù¾ÛŒØ§Ù…:</label>
      <textarea id="message" placeholder="Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯"></textarea>
    </div>
  </div>

  <!-- Ù…Ø±Ø­Ù„Ù‡ Ûµ - ÙØ±Ù… ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯ -->
  <div class="step" id="step5">
    <h3>âœ… ÙØ±Ù… ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯!</h3>
    <p>Ù…ØªØ´Ú©Ø±ÛŒÙ… Ú©Ù‡ ÙØ±Ù… Ø±Ø§ Ù¾Ø± Ú©Ø±Ø¯ÛŒØ¯.</p>
    <button onclick="Telegram.WebApp.close()">Ø¨Ø³ØªÙ† ÙØ±Ù…</button>
  </div>

  <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù‡Ø¯Ø§ÛŒØª -->
  <div class="nav">
    <button onclick="prevStep()">â¬…ï¸ Ù‚Ø¨Ù„ÛŒ</button>
    <button onclick="nextStep()">â¡ï¸ Ø¨Ø¹Ø¯ÛŒ</button>
  </div>

  <script>
    let currentStep = 1;
    const totalSteps = 5;
    let formData = {};

    Telegram.WebApp.ready();

    function showStep(step) {
      document.querySelectorAll(".step").forEach((el, i) => {
        el.classList.remove("active");
        if (i === step - 1) el.classList.add("active");
      });
    }

    function nextStep() {
      if (currentStep === 1) {
        formData.name = document.getElementById("name").value.trim();
        if (!formData.name) return alert("âš ï¸ Ù†Ø§Ù… Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯!");
      }
      if (currentStep === 2) {
        formData.phone = document.getElementById("phone").value.trim();
        if (!formData.phone) return alert("âš ï¸ Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯!");
      }
      if (currentStep === 3) {
        let checks = document.querySelectorAll("#step3 input:checked");
        formData.interests = Array.from(checks).map(el => el.value);
      }
      if (currentStep === 4) {
        formData.message = document.getElementById("message").value.trim() || "â€”";

        if (Telegram.WebApp) {
          Telegram.WebApp.sendData(JSON.stringify(formData));
        } else {
          alert("âš ï¸ Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ ÙÙ‚Ø· Ø¯Ø± Web App ØªÙ„Ú¯Ø±Ø§Ù… Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯.");
        }
      }

      // Ø±ÙØªÙ† Ø¨Ù‡ Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯
      if (currentStep < totalSteps) {
        currentStep++;
        showStep(currentStep);
      }
    }

    function prevStep() {
      if (currentStep > 1) {
        currentStep--;
        showStep(currentStep);
      }
    }

    showStep(currentStep);
  </script>
</body>
</html>
